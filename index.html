<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Senses Lectures Tracker</title>
    <style>
        :root {
            --primary-color: #00cec9;
            --secondary-color: #2c3e50;
            --background-gradient: linear-gradient(to right, #1b1f24, #2d3436);
            --text-color: #dfe6e9;
            --highlight-color: #0984e3;
            --remaining-color: #ff7675;
            --notes-color: #ffeaa7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background-gradient);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            color: #b2bec3;
            font-size: 1.2rem;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .main-btn {
            background: var(--primary-color);
            color: #1e272e;
        }
        
        .remaining-btn {
            background: var(--remaining-color);
            color: white;
        }
        
        .notes-btn {
            background: var(--notes-color);
            color: #2d3436;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        #searchBox {
            width: 100%;
            max-width: 600px;
            padding: 15px;
            margin: 0 auto 30px;
            display: block;
            background: #2d3436;
            color: white;
            border: 2px solid #636e72;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        #searchBox:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(0, 206, 201, 0.5);
        }
        
        .progress-container {
            width: 100%;
            max-width: 800px;
            margin: 30px auto;
            background: #2d3436;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .progress-bar {
            height: 25px;
            background: #636e72;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #00b894);
            border-radius: 12px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: #1e272e;
            font-weight: bold;
            font-size: 14px;
        }
        
        .lectures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .discipline-card {
            background: #2d3436;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        
        .discipline-card:hover {
            transform: translateY(-5px);
        }
        
        .discipline-header {
            background: #1e272e;
            padding: 15px 20px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .discipline-title {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin: 0;
        }
        
        .discipline-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.9rem;
            color: #b2bec3;
        }
        
        .lecture-list {
            list-style: none;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .lecture-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            background: #34495e;
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid #00b894;
            flex-direction: column;
        }
        
        .lecture-item:hover {
            background: #3d566e;
            transform: translateX(5px);
        }
        
        .lecture-item.completed {
            background: rgba(9, 132, 227, 0.2);
            border-left-color: var(--primary-color);
            opacity: 0.8;
        }
        
        .lecture-item.remaining-highlight {
            animation: pulse 2s infinite;
            border-left-color: var(--remaining-color);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 118, 117, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 118, 117, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 118, 117, 0); }
        }
        
        .lecture-header {
            display: flex;
            align-items: flex-start;
            width: 100%;
            cursor: pointer;
        }
        
        .lecture-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .lecture-item.completed .lecture-checkbox {
            background: var(--primary-color);
        }
        
        .lecture-item.completed .lecture-checkbox::after {
            content: "‚úì";
            color: #1e272e;
            font-weight: bold;
        }
        
        .lecture-info {
            flex: 1;
        }
        
        .lecture-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-right: 10px;
        }
        
        .week-tag {
            background: #636e72;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: 10px;
            float: right;
        }
        
        .lecture-notes {
            width: 100%;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 234, 167, 0.1);
            border: 1px solid var(--notes-color);
            border-radius: 5px;
            color: var(--text-color);
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            min-height: 60px;
            transition: all 0.3s;
            display: none;
        }
        
        .lecture-notes:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 5px rgba(0, 206, 201, 0.3);
        }
        
        .lecture-notes.expanded {
            display: block;
        }
        
        .notes-indicator {
            font-size: 12px;
            color: var(--notes-color);
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .notes-indicator::before {
            content: "üìù";
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #b2bec3;
        }
        
        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        @media (max-width: 768px) {
            .lectures-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Special Senses Lectures Tracker</h1>
            <p class="subtitle">Track your progress through 16 Special Senses lectures across 6 disciplines</p>
        </header>
        
        <input type="text" id="searchBox" placeholder="Search lectures by title, number, discipline, or notes...">
        
        <div class="controls">
            <button class="main-btn" id="showRemainingBtn">
                <span>üìö</span> Show Incomplete Lectures
            </button>
            <button class="main-btn" id="showAllBtn">
                <span>üìñ</span> Show All Lectures
            </button>
            <button class="notes-btn" id="toggleNotesBtn">
                <span>üìù</span> Toggle All Notes
            </button>
            <button class="remaining-btn" id="remainingCountBtn">
                <span>‚è≥</span> Incomplete: <span id="remainingCount">16</span>
            </button>
        </div>
        
        <div class="progress-container">
            <div class="progress-info">
                <span>Overall Progress</span>
                <span id="progressText">0% (0/16)</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
            </div>
        </div>
        
        <div id="lecturesContainer" class="lectures-grid">
            <!-- Lectures will be loaded here by JavaScript -->
        </div>
    </div>

    <script>
        // Special Senses lecture data from your images
        const lectures = [
            // Physiology (6 lectures)
            { number: "L2", title: "Refractive System of the Eye, Middle Layer, and Lens", discipline: "Physiology", week: 1 },
            { number: "L3", title: "Phototransduction and Retinal Adaptation", discipline: "Physiology", week: 1 },
            { number: "L6", title: "Color Vision, Binocular Vision, Depth of Perception, and Visual Pathway", discipline: "Physiology", week: 2 },
            { number: "L9", title: "Role of External and Middle Ear in Hearing", discipline: "Physiology", week: 3 },
            { number: "L11", title: "Role of Inner Ear in Hearing", discipline: "Physiology", week: 3 },
            { number: "L13", title: "Coding of Auditory Information and Taste Sensation", discipline: "Physiology", week: 4 },
            
            // Anatomy (2 lectures)
            { number: "L4", title: "Orbit", discipline: "Anatomy", week: 1 },
            { number: "L14", title: "Anatomy of the Ear", discipline: "Anatomy", week: 3 },
            
            // Histology (2 lectures)
            { number: "L1", title: "Histology of the Eye", discipline: "Histology", week: 1 },
            { number: "L10", title: "Histology of the Ear", discipline: "Histology", week: 3 },
            
            // Parasitology (2 lectures)
            { number: "L5", title: "Loiosis", discipline: "Parasitology", week: 2 },
            { number: "L12", title: "Onchocerciasis", discipline: "Parasitology", week: 3 },
            
            // Microbiology (2 lectures)
            { number: "L7", title: "Infections of the Eye", discipline: "Microbiology", week: 2 },
            { number: "L16", title: "Infections of the Ear", discipline: "Microbiology", week: 4 },
            
            // Pathology (2 lectures)
            { number: "L8", title: "Eye Infections and Tumor", discipline: "Pathology", week: 2 },
            { number: "L15", title: "Ear Infections and Tumors", discipline: "Pathology", week: 4 }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('lecturesContainer');
            const remainingCountEl = document.getElementById('remainingCount');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            let allNotesVisible = false;
            
            // Clear any existing lecture data from localStorage
            function clearOldLectureData() {
                const keysToRemove = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.startsWith('lecture-L') && !key.includes('-notes')) {
                        keysToRemove.push(key);
                    }
                }
                keysToRemove.forEach(key => localStorage.removeItem(key));
            }
            
            // Get saved notes for a lecture
            function getLectureNotes(lectureNumber) {
                return localStorage.getItem(`lecture-${lectureNumber}-notes`) || '';
            }
            
            // Save notes for a lecture
            function saveLectureNotes(lectureNumber, notes) {
                localStorage.setItem(`lecture-${lectureNumber}-notes`, notes);
            }
            
            // Check if lecture has notes
            function hasNotes(lectureNumber) {
                const notes = getLectureNotes(lectureNumber);
                return notes && notes.trim().length > 0;
            }
            
            // Initialize lectures
            function renderLectures() {
                // Clear old data first
                clearOldLectureData();
                container.innerHTML = '';
                
                // Group by discipline
                const grouped = lectures.reduce((acc, lecture) => {
                    if (!acc[lecture.discipline]) acc[lecture.discipline] = [];
                    acc[lecture.discipline].push(lecture);
                    return acc;
                }, {});
                
                // Render each discipline as a card
                for (const discipline in grouped) {
                    const card = document.createElement('div');
                    card.className = 'discipline-card';
                    
                    const completedCount = grouped[discipline].filter(lecture => 
                        localStorage.getItem(`lecture-${lecture.number}`)
                    ).length;
                    const totalCount = grouped[discipline].length;
                    
                    card.innerHTML = `
                        <div class="discipline-header">
                            <h3 class="discipline-title">${discipline}</h3>
                            <div class="discipline-stats">
                                <span>${completedCount}/${totalCount} completed</span>
                                <span>${Math.round((completedCount/totalCount)*100)}%</span>
                            </div>
                        </div>
                        <ul class="lecture-list">
                            ${grouped[discipline].map(lecture => {
                                const isCompleted = localStorage.getItem(`lecture-${lecture.number}`);
                                const hasNotesValue = hasNotes(lecture.number);
                                const notesContent = getLectureNotes(lecture.number);
                                
                                return `
                                    <li class="lecture-item ${isCompleted ? 'completed' : ''}" data-id="${lecture.number}">
                                        <div class="lecture-header">
                                            <div class="lecture-checkbox"></div>
                                            <div class="lecture-info">
                                                <span class="lecture-number">${lecture.number}</span>
                                                ${lecture.title}
                                                <span class="week-tag">Week ${lecture.week}</span>
                                                ${hasNotesValue ? '<div class="notes-indicator">Has notes</div>' : ''}
                                            </div>
                                        </div>
                                        <textarea 
                                            class="lecture-notes ${allNotesVisible ? 'expanded' : ''}" 
                                            placeholder="Add your notes for this lecture here... (Auto-saves)"
                                            data-lecture="${lecture.number}"
                                        >${notesContent}</textarea>
                                    </li>
                                `;
                            }).join('')}
                        </ul>
                    `;
                    
                    container.appendChild(card);
                }
                
                // Add event listeners to lecture headers
                document.querySelectorAll('.lecture-header').forEach(header => {
                    header.addEventListener('click', function() {
                        const lectureItem = this.parentElement;
                        const lectureId = lectureItem.getAttribute('data-id');
                        lectureItem.classList.toggle('completed');
                        
                        if (lectureItem.classList.contains('completed')) {
                            localStorage.setItem(`lecture-${lectureId}`, 'true');
                        } else {
                            localStorage.removeItem(`lecture-${lectureId}`);
                        }
                        
                        updateProgress();
                        updateDisciplineStats();
                    });
                });
                
                // Add event listeners to notes textareas
                document.querySelectorAll('.lecture-notes').forEach(textarea => {
                    textarea.addEventListener('input', function() {
                        const lectureNumber = this.getAttribute('data-lecture');
                        saveLectureNotes(lectureNumber, this.value);
                        
                        // Update notes indicator
                        const lectureItem = this.parentElement;
                        const notesIndicator = lectureItem.querySelector('.notes-indicator');
                        
                        if (this.value.trim().length > 0 && !notesIndicator) {
                            const indicator = document.createElement('div');
                            indicator.className = 'notes-indicator';
                            indicator.textContent = 'Has notes';
                            lectureItem.querySelector('.lecture-info').appendChild(indicator);
                        } else if (this.value.trim().length === 0 && notesIndicator) {
                            notesIndicator.remove();
                        }
                    });
                    
                    // Auto-resize textarea
                    textarea.addEventListener('input', function() {
                        this.style.height = 'auto';
                        this.style.height = (this.scrollHeight) + 'px';
                    });
                });
                
                updateProgress();
            }
            
            // Update progress counter and progress bar
            function updateProgress() {
                const completed = document.querySelectorAll('.lecture-item.completed').length;
                const total = lectures.length;
                const remaining = total - completed;
                const percentage = Math.round((completed / total) * 100);
                
                remainingCountEl.textContent = remaining;
                progressFill.style.width = `${percentage}%`;
                progressFill.textContent = `${percentage}%`;
                progressText.textContent = `${percentage}% (${completed}/${total})`;
                
                // Change progress bar color based on completion
                if (percentage === 100) {
                    progressFill.style.background = 'linear-gradient(90deg, #00b894, #55efc4)';
                } else if (percentage >= 75) {
                    progressFill.style.background = 'linear-gradient(90deg, #00cec9, #81ecec)';
                } else {
                    progressFill.style.background = 'linear-gradient(90deg, var(--primary-color), #00b894)';
                }
            }
            
            // Update discipline stats
            function updateDisciplineStats() {
                document.querySelectorAll('.discipline-card').forEach(card => {
                    const discipline = card.querySelector('.discipline-title').textContent;
                    const lectureItems = card.querySelectorAll('.lecture-item');
                    const completedCount = card.querySelectorAll('.lecture-item.completed').length;
                    const totalCount = lectureItems.length;
                    
                    const stats = card.querySelector('.discipline-stats');
                    stats.innerHTML = `
                        <span>${completedCount}/${totalCount} completed</span>
                        <span>${Math.round((completedCount/totalCount)*100)}%</span>
                    `;
                });
            }
            
            // Search functionality (now includes notes)
            document.getElementById('searchBox').addEventListener('input', function(e) {
                const term = e.target.value.toLowerCase();
                
                document.querySelectorAll('.lecture-item').forEach(item => {
                    const text = item.textContent.toLowerCase();
                    const notes = item.querySelector('.lecture-notes').value.toLowerCase();
                    const searchContent = text + ' ' + notes;
                    
                    if (searchContent.includes(term)) {
                        item.style.display = 'flex';
                        // Highlight the search term in title and notes
                        const lectureInfo = item.querySelector('.lecture-info');
                        const originalHTML = lectureInfo.innerHTML;
                        const highlightedHTML = originalHTML.replace(
                            new RegExp(term, 'gi'),
                            match => `<mark style="background: #ffeaa7; color: #2d3436; padding: 2px 4px; border-radius: 3px;">${match}</mark>`
                        );
                        lectureInfo.innerHTML = highlightedHTML;
                        
                        // Also highlight in notes if visible
                        const notesArea = item.querySelector('.lecture-notes');
                        if (notesArea.classList.contains('expanded')) {
                            const notesValue = notesArea.value;
                            const highlightedNotes = notesValue.replace(
                                new RegExp(term, 'gi'),
                                match => `<mark style="background: #ffeaa7; color: #2d3436; padding: 2px 0;">${match}</mark>`
                            );
                            // Create a temporary div to show highlighted notes
                            const tempDiv = document.createElement('div');
                            tempDiv.innerHTML = highlightedNotes;
                            notesArea.style.background = 'linear-gradient(90deg, rgba(255,234,167,0.3), rgba(255,234,167,0.1))';
                        }
                    } else {
                        item.style.display = 'none';
                        // Reset notes background
                        const notesArea = item.querySelector('.lecture-notes');
                        notesArea.style.background = '';
                    }
                });
                
                // Hide empty discipline cards
                document.querySelectorAll('.discipline-card').forEach(card => {
                    const visibleLectures = card.querySelectorAll('.lecture-item[style="display: flex"]').length;
                    if (visibleLectures === 0) {
                        card.style.display = 'none';
                    } else {
                        card.style.display = 'block';
                    }
                });
            });
            
            // Toggle all notes visibility
            document.getElementById('toggleNotesBtn').addEventListener('click', function() {
                allNotesVisible = !allNotesVisible;
                document.querySelectorAll('.lecture-notes').forEach(notes => {
                    notes.classList.toggle('expanded', allNotesVisible);
                    
                    // Auto-resize when expanded
                    if (allNotesVisible) {
                        notes.style.height = 'auto';
                        notes.style.height = (notes.scrollHeight) + 'px';
                    }
                });
                
                this.innerHTML = allNotesVisible ? 
                    '<span>üìù</span> Hide All Notes' : 
                    '<span>üìù</span> Show All Notes';
            });
            
            // Button event listeners
            document.getElementById('showRemainingBtn').addEventListener('click', function() {
                document.querySelectorAll('.lecture-item').forEach(item => {
                    if (item.classList.contains('completed')) {
                        item.style.display = 'none';
                    } else {
                        item.style.display = 'flex';
                        item.classList.add('remaining-highlight');
                        setTimeout(() => item.classList.remove('remaining-highlight'), 2000);
                    }
                });
                
                // Update discipline cards to only show those with remaining lectures
                document.querySelectorAll('.discipline-card').forEach(card => {
                    const remainingLectures = card.querySelectorAll('.lecture-item:not(.completed)');
                    if (remainingLectures.length === 0) {
                        card.style.display = 'none';
                    } else {
                        card.style.display = 'block';
                    }
                });
            });
            
            document.getElementById('showAllBtn').addEventListener('click', function() {
                document.querySelectorAll('.lecture-item').forEach(item => {
                    item.style.display = 'flex';
                });
                
                document.querySelectorAll('.discipline-card').forEach(card => {
                    card.style.display = 'block';
                });
            });
            
            // Initial render
            renderLectures();
        });
    </script>
</body>
</html>